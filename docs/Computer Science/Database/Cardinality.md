# Index 어떻게 정해야할까?

- 이름, 나이, 성별 세 가지의 필드를 갖고 있는 테이블을 생각해보자. 이름은 온갖 경우의 수가 존재할 것이며 나이는 INT 타입을 갖을 것이고, <br>
성별은 남, 녀 두 가지 경우에 대해서만 데이터가 존재할 것임을 쉽게 예측할 수 있다.<br>
이 경우 어떤 컬럼에 대해서 인덱스를 생성하는 것이 효율적일까? <br><br>
결론부터 말하자면 이름에 대해서만 인덱스를 생성하면 효율적이다.<br>
왜 성별이나 나이는 인덱스를 생성하면 비효율적일까? 10000 레코드에 해당하는 테이블에 대해서 2000 단위로 성별에 인덱스를 생성했다고 가정하자.<br>
값의 range 가 적은 성별은 인덱스를 읽고 다시 한 번 디스크 I/O 가 발생하기 때문에 그 만큼 비효율적인 것이다.


- 즉 컬럼을 이루고 있는 데이터의 형식에 따라서 인덱스의 성능이 악영향을 미칠 수 있고, 데이터의 형식에 따라 인덱스를 만들면 효율적이고<br>
만들면 비효율적인 데이터의 형식이 존재한다는 것이다. 그렇다면 어떻게 정해야할까?<br>
###카디널리티가 가장 높은 값 ( 중복되지 않은 값들의 수 )으로 잡는 것이 좋다.



# Cardinality, 카디날리티란 무엇인가?
- 카디널리티는 전체 행에 대한 특정 컬럼의 중복 수치를 나타내는 지표이다.<br>
즉 중복도가 ‘낮으면’ 카디널리티가 ‘높다’고 표현하고, 중복도가 ‘높으면’ 카디널리티가 ‘낮다’고 표현한다.<br>
예를들어, 주민등록번호 같은 경우는 중복되는 값이 없으므로 카디널리티가 높다고 할 수 있다.<br>
이에 비해 이름같은 경우는 ‘주민등록번호에 비해’ 중복되는 값이 많으므로, 이름은 ‘주민등록번호에 비해’ 카디널리티가 낮다고 할 수 있다.<br>
‘주민등록번호에 비해’라는 부분을 강조한 이유는, 카디널리티는 상대적인 개념으로 이해해야하기 때문이다.<br>
즉, 카디널리티는 객관적 수치보다는 상대적인 개념으로 이해해야한다.<br>
인덱스를 걸 때, 내가 원하는 데이터를 선택하는 과정에서 최대한 많은 데이터가 걸러져야 성능이 좋을것이다.<br>
(선택하는 데이터가 많아질수록 full scan에 가까워지므로)<br>
주민등록번호로 인덱스를 걸면 이름으로 인덱스를 거는 것보다 많은 데이터들이 걸러질 것이다.<br>
즉, 여러 컬럼을 동시에 인덱싱할때, 다음과 같이 카디널리티가 높은 컬럼을(중복이 적은 컬럼을) 우선순위로 두는 것이 인덱싱 전략에 유리하다.