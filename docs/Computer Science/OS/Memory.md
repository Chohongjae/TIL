# 메모리

![스택 프레임](../../images/메모리구조.png)

- CPU가 원하는 데이터가 아래쪽에 있을경우 CPU에 도달하려면 위에 있는 모든 계층을 거쳐야 한다.

## 캐시

- 레지스터와 메인 메모리 사이에 위치해, CPU가 메인메모리에서 데이터를 요청하면, 그 데이터와 함께<br>
인접 데이터 메모리 블록(64~128byte)를 캐시로 가져온 후 요청한 데이터만 레지스터로 이동한다.<br>
이때 해당 메모리 블록을 캐시행이라고 한다.

- CPU가 다시 다른 데이터를 요청하면 메인 메모리에 접근하기 이전에, 캐시에 요청한 데이터가 있는지 확인한 후<br>
캐시에 있으면 캐시히트, 캐시에 없어서 메인메모리에서 가져와야하면, 캐시미스라 한다.
    - 캐시 히트가 계속 일어날수록 시스템 성능이 좋아진다.
    
- 지역성의 원리
    - 캐시 히트를 위해 데이터의 접근이 같은 메모리 공간이나 인접한 메모리 공간에서 자주 일어난다는 의미
    
    - 시간적 지역성
        - 특정 데이터에 한 번 접근했을 때 곧 다시 그 데이터에 접근할 가능성이 높다는 뜻
    - 공간적 지역성
        - 접근할 데이터가 이전에 접근했던 데이터 근처 메모리 블록에 근처에 있을 확률이 높다는 뜻
        
    - 프로그램이 캐시 히트할 확률은 보통 90%라 한다.
