## 쿠키와 세션을 사용하는 이유

- HTTP 프로토콜의 특징이자 약점을 보완하기 위해서 사용한다.
- HTTP 프로토콜의 특징


            1) 비연결지향(Connectionless)
            
             HTTP는 먼저 클라이언트가 request를 서버에 보내면, 서버는 클라이언트에게 요청에 맞는 response를 보내고 접속을 끊는 특성이 있다.
            
            (* HTTP1.1 버전에서 커넥션을 계속 열어두고(연결을 유지하고) request에 재활용하는 기능이 추가되었다.
            
            2) 상태정보유지안함(Stateless)
            
            연결을 끊는 순간 클라이언트와 서버의 통신이 끝나며 상태 정보는 유지하지 않는 특성이 있다.
            
            
- HTTP의 이 두가지 특성을 보완하기 위해서 쿠키와 세션을 사용하게 되었다.<br>
비연결지향이라는 특성 덕분에 계속해서 통신 연결을 유지하지 않기 때문에 리소스 낭비가 줄어드는 것은<br>
아~~~~주 큰 장점이지만 통신할 때마다 새로 커넥션을 열기 때문에 클라이언트는 내가 누구인지 인증을 계속해야하는 단점이 생긴다.<br>
만약 쿠키와 세션이 없다면 어떤 페이지에서 옮겨다닐 때마다 로그인을 다시해야 한다.


- 쿠키(Cookie)


            쿠키는 클라이언트 로컬에 저장되는 키와 값이 들어있는 작은 데이터 파일이다.
            쿠키에는 이름, 값, 만료날짜(쿠키 저장기간), 경로 정보가 들어있다.
            쿠키는 일정시간동안 데이터를 저장할 수 있다. (로그인 상태 유지에 활용)
            쿠키는 클라이언트의 상태 정보를 로컬에 저장했다가 참조한다.


- 세션(Session)


            일정 시간동안 같은 브라우저로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술
            즉, 웹 브라우저를 통해 웹 서버에 접속한 이후로 브라우저를 종료할 때 까지 유지되는 상태
            클라이언트가 Request를 보내면, 해당 서버의 엔진이 클라이언트에게 유일한 ID를 부여하는 데 이것이 세션ID다.


### 세션을 주로 사용하면 좋은데 왜 쿠키를 사용할까?
- 세션은 서버의 자원을 사용하기때문에 무분별하게 만들다보면 서버의 메모리가 감당할 수 없어질 수가 있고 속도가 느려질 수 있기 때문이다.

# 사용 사례
쿠키 : 자동 로그인, 장바구니<br>
세션 : 로그인 정보 유지

# 속도
쿠키 : 쿠키에 정보가 있기 때문에 서버에 요청시 속도가 빠르고<br>
세션 : 세션은 정보가 서버에 있기 때문에 처리가 요구되어 비교적 느린 속도를 낸다.

# 라이프 사이클
쿠키 : 만료시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아 있을 수 있다.<br>
또한 만료기간을 넉넉하게 잡아두면 쿠키삭제를 할 때 까지 유지될 수도 있다.<br>
세션 : 세션도 만료시간을 정할 수 있지만 브라우저가 종료되면 만료시간에 상관없이 삭제된다.

# 보안
쿠키 : 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 request에서 스나이핑 당할 우려가 있어서 보안에 취약<br>
세션 : 세션은 쿠키를 이용해서 sessionid 만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 비교적 보안성이 좋다.

# 저장 위치
쿠키 : 클라이언트의 웹 브라우저가 지정하는 메모리 or 하드디스크<br>
세션 : 서버의 메모리에 저장

# 만료 시점
쿠키 : 저장할 때 expires 속성을 정의해 무효화시키면 삭제될 날짜 정할 수 있음<br>
세션 : 클라이언트가 로그아웃하거나, 설정 시간동안 반응이 없으면 무효화 되기 때문에 정확한 시점 알 수 없음

# 리소스
쿠키 : 클라이언트에 저장되고 클라이언트의 메모리를 사용하기 때문에 서버 자원 사용하지 않음<br>
세션 : 세션은 서버에 저장되고, 서버 메모리로 로딩 되기 때문에 세션이 생길 때마다 리소스를 차지함

# 용량 제한
쿠키 : 클라이언트도 모르게 접속되는 사이트에 의하여 설정될 수 있기 때문에 쿠키로 인해 문제가 발생하는 걸<br>
막고자 한 도메인당 20개, 하나의 쿠키 당 4KB로 제한해 둠<br>
세션 : 클라이언트가 접속하면 서버에 의해 생성되므로 개수나 용량 제한 없음

